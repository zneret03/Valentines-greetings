<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Special Surprise</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #ff4d6d;
        --secondary-color: #ff8fa3;
        --glass-bg: rgba(255, 255, 255, 0.25);
        --glass-border: rgba(255, 255, 255, 0.5);
        --text-color: #590d22;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(
          135deg,
          #ff9a9e 0%,
          #fecfef 99%,
          #fecfef 100%
        );
        height: 100vh;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var(--text-color);
      }

      /* Ambient Background Animations */
      .bg-shapes {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        pointer-events: none;
      }

      .shape {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        animation: float 20s infinite linear;
      }

      .shape:nth-child(1) {
        width: 150px;
        height: 150px;
        top: 10%;
        left: 10%;
        animation-duration: 25s;
      }

      .shape:nth-child(2) {
        width: 200px;
        height: 200px;
        bottom: 20%;
        right: 10%;
        animation-duration: 30s;
      }

      .shape:nth-child(3) {
        width: 100px;
        height: 100px;
        top: 40%;
        left: 50%;
        animation-duration: 35s;
      }

      @keyframes float {
        0% {
          transform: translate(0, 0) rotate(0deg);
        }
        50% {
          transform: translate(20px, 40px) rotate(180deg);
        }
        100% {
          transform: translate(0, 0) rotate(360deg);
        }
      }

      /* Game Container */
      #game-stage {
        position: relative;
        width: 100%;
        height: 100%;
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        transition: opacity 1s ease;
      }

      #game-stage.hidden {
        opacity: 0;
        pointer-events: none;
        display: none;
      }

      .instructions {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        padding: 2rem;
        border-radius: 20px;
        border: 1px solid var(--glass-border);
        text-align: center;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        margin-bottom: 2rem;
        animation: fadeIn 1s ease-out;
      }

      .instructions h1 {
        font-family: "Dancing Script", cursive;
        font-size: 3rem;
        color: var(--text-color);
        margin-bottom: 0.5rem;
      }

      .instructions p {
        font-size: 1.2rem;
      }

      .score-board {
        margin-top: 1rem;
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary-color);
      }

      /* Envelope Stage */
      #envelope-stage {
        display: none;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 20;
        opacity: 0;
        transition: opacity 1.5s ease;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 100%;
      }

      #envelope-stage.visible {
        display: flex;
        opacity: 1;
      }

      .envelope-container {
        position: relative;
        cursor: pointer;
        transition: transform 0.5s ease;
      }
      .envelope-container:hover {
        transform: scale(1.05);
      }

      .envelope {
        width: 300px;
        height: 200px;
        background: #ff4d6d;
        border-radius: 10px;
        position: relative;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        transition: all 0.5s ease;
      }

      .flap {
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 0;
        border-left: 150px solid transparent;
        border-right: 150px solid transparent;
        border-top: 110px solid #ff758f;
        transform-origin: top;
        transition:
          transform 0.6s ease 0.5s,
          z-index 0.2s;
        z-index: 5;
      }

      .pocket {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 0;
        border-left: 150px solid transparent;
        border-right: 150px solid transparent;
        border-bottom: 200px solid #ff4d6d;
        z-index: 3;
      }

      .letter-preview {
        width: 260px;
        height: 180px;
        background: white;
        position: absolute;
        bottom: 0;
        border-radius: 5px;
        z-index: 2;
        transition: transform 0.8s ease 1s;
      }

      .seal {
        width: 40px;
        height: 40px;
        background: #d00000;
        border-radius: 50%;
        position: absolute;
        top: 80px;
        left: 130px;
        z-index: 6;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #ffcccb;
        font-size: 1.2rem;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: opacity 0.5s ease;
      }

      .envelope-container.open .flap {
        transform: rotateX(180deg);
        z-index: 1;
      }
      .envelope-container.open .seal {
        opacity: 0;
        pointer-events: none;
      }
      .envelope-container.open .letter-preview {
        transform: translateY(-100px);
        z-index: 4;
      }

      .open-btn {
        margin-top: 3rem;
        padding: 1rem 3rem;
        background: white;
        color: var(--primary-color);
        border: none;
        border-radius: 50px;
        font-size: 1.5rem;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 5px 15px rgba(255, 77, 109, 0.4);
        transition: all 0.3s ease;
        font-family: "Poppins", sans-serif;
      }

      /* RESPONSIVE LETTER VIEW START */
      #letter-view {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(5px);
        z-index: 100;
        display: none;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity 0.5s ease;
        padding: 20px; /* Added padding for mobile screen edges */
      }

      #letter-view.active {
        display: flex;
        opacity: 1;
      }

      .love-letter {
        background: #fff;
        width: 95%; /* Responsive width */
        max-width: 600px;
        max-height: 85vh; /* Prevents overflow on short screens */
        overflow-y: auto; /* Adds scroll if content is too long */
        padding: 3rem 2rem; /* Adjusted padding */
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        background-image: repeating-linear-gradient(
          white 0px,
          white 24px,
          #e9ecef 25px
        );
        line-height: 25px;
        transform: scale(0.8);
        transition: transform 0.5s ease;
      }

      #letter-view.active .love-letter {
        transform: scale(1);
      }

      .love-letter h2 {
        font-family: "Dancing Script", cursive;
        font-size: 2.2rem;
        color: var(--primary-color);
        text-align: center;
        margin-bottom: 1.5rem;
      }

      .love-letter p {
        font-family: "Dancing Script", cursive;
        font-size: 1.4rem;
        color: #333;
        margin-bottom: 1.2rem;
        line-height: 1.5;
      }

      @media (max-width: 480px) {
        .love-letter {
          padding: 2.5rem 1.2rem;
        }
        .love-letter h2 {
          font-size: 1.8rem;
        }
        .love-letter p {
          font-size: 1.2rem;
        }
      }
      /* RESPONSIVE LETTER VIEW END */

      .close-btn {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.5rem;
        cursor: pointer;
        color: #aaa;
        background: none;
        border: none;
        z-index: 101;
      }

      /* Rest of your existing Styles */
      .hiding-spots-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 2rem;
        max-width: 800px;
        padding: 20px;
        z-index: 15;
      }

      .hiding-spot {
        font-size: 3.5rem;
        cursor: pointer;
        transition: transform 0.3s ease;
        position: relative;
      }

      .hiding-spot.shaking {
        animation: shake 0.5s both;
        color: #ccc;
      }
      .hiding-spot.revealed {
        animation: popOpen 0.5s forwards;
      }

      @keyframes popOpen {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        100% {
          transform: scale(0);
          opacity: 0;
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .hidden-heart-popup {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0);
        font-size: 2rem;
        color: #ff0000;
        z-index: 20;
      }

      .pop-anim {
        animation: popHeart 1s ease forwards;
      }

      @keyframes popHeart {
        0% {
          transform: translate(-50%, -50%) scale(0);
          opacity: 0;
        }
        50% {
          transform: translate(-50%, -150%) scale(2);
          opacity: 1;
        }
        100% {
          transform: translate(-50%, -300%) scale(0);
          opacity: 0;
        }
      }

      @keyframes shake {
        10%,
        90% {
          transform: translate3d(-1px, 0, 0);
        }
        20%,
        80% {
          transform: translate3d(2px, 0, 0);
        }
        30%,
        50%,
        70% {
          transform: translate3d(-4px, 0, 0);
        }
        40%,
        60% {
          transform: translate3d(4px, 0, 0);
        }
      }
    </style>
  </head>

  <body>
    <div class="bg-shapes">
      <div class="shape"></div>
      <div class="shape"></div>
      <div class="shape"></div>
    </div>

    <div id="game-stage">
      <div class="instructions">
        <h1>Find My Heart</h1>
        <p>
          I've hidden 3 hearts inside these gifts.<br />Click them to find where
          my heart lies!
        </p>
        <div class="score-board">
          Hearts Found: <span id="counter">0</span>/3
        </div>
      </div>
      <div class="hiding-spots-container"></div>
    </div>

    <div id="envelope-stage">
      <div class="envelope-container" id="envelope">
        <div class="envelope">
          <div class="pocket"></div>
          <div class="letter-preview"></div>
          <div class="flap"></div>
          <div class="seal">‚ù§Ô∏è</div>
        </div>
      </div>
      <button class="open-btn" onclick="openEnvelope()">Open Me</button>
    </div>

    <div id="letter-view">
      <div class="love-letter">
        <button class="close-btn" onclick="closeLetter()">√ó</button>
        <h2>To My Beautiful Woman of God,</h2>
        <p>
          I thank Jesus every day for bringing you into my life. You are a
          blessing I don't deserve, and a treasure I promise to always protect.
        </p>
        <p style="font-style: italic; color: #d63384">
          "Let all that you do be done in love." ‚Äî 1 Corinthians 16:14
        </p>
        <p>
          I am here for you always‚Äîto lead us in faith, to cherish your heart,
          and to love you just as Christ loves us. You are my greatest
          adventure.
        </p>
        <p>Happy Valentine's Day! ‚ù§Ô∏è</p>
        <p style="text-align: right">‚Äî Yours forever in Christ,</p>
      </div>
    </div>

    <script>
      let heartsFound = 0;
      const totalHearts = 3;
      const hidingItems = [
        "üéÅ",
        "üéÅ",
        "üéÅ",
        "üß∏",
        "üß∏",
        "üíê",
        "üíê",
        "‚òÅÔ∏è",
        "üíå",
        "üç¨",
        "üßÅ",
        "üåπ",
      ];

      window.onload = function () {
        const container = document.querySelector(".hiding-spots-container");
        hidingItems.sort(() => Math.random() - 0.5);
        const displayItems = hidingItems.slice(0, 12);
        let heartIndices = new Set();
        while (heartIndices.size < 3)
          heartIndices.add(Math.floor(Math.random() * displayItems.length));

        displayItems.forEach((icon, index) => {
          const spot = document.createElement("div");
          spot.classList.add("hiding-spot");
          spot.innerText = icon;
          spot.dataset.hasHeart = heartIndices.has(index);
          spot.onclick = () => checkSpot(spot);
          container.appendChild(spot);
        });
      };

      function checkSpot(element) {
        if (
          element.classList.contains("shaking") ||
          element.classList.contains("revealed")
        )
          return;
        if (element.dataset.hasHeart === "true") {
          element.classList.add("revealed");
          const heart = document.createElement("div");
          heart.classList.add("hidden-heart-popup", "pop-anim");
          heart.innerText = "‚ù§Ô∏è";
          element.appendChild(heart);
          heartsFound++;
          document.getElementById("counter").innerText = heartsFound;
          if (heartsFound === totalHearts) setTimeout(revealEnvelope, 1200);
        } else {
          element.classList.add("shaking");
        }
      }

      function revealEnvelope() {
        document.getElementById("game-stage").classList.add("hidden");
        setTimeout(() => {
          document.getElementById("game-stage").style.display = "none";
          const stage = document.getElementById("envelope-stage");
          stage.style.display = "flex";
          void stage.offsetWidth;
          stage.classList.add("visible");
        }, 1000);
      }

      function openEnvelope() {
        document.getElementById("envelope").classList.add("open");
        setTimeout(
          () => document.getElementById("letter-view").classList.add("active"),
          1500,
        );
      }

      function closeLetter() {
        document.getElementById("letter-view").classList.remove("active");
      }
    </script>
  </body>
</html>

